{let n=function(){let n=$("#new-post-form");n.submit((function(s){s.preventDefault(),$.ajax({type:"post",url:"/posts/create",data:n.serialize(),success:function(n){let s=e(n.data.post);$("#post-list-container>div").prepend(s),t($(" .delete-post-button",s)),new PostComments(n.data.post._id),new ToggleLike($(" .toggle-like-button",s)),new Noty({theme:"relax",text:"Post Created!",type:"success",layout:"topRight",timeout:1500}).show()},console:console,error:function(n){console.log(n.responseText)}})}))},e=function(n){return $(`\n        <li id="post- ${n._id}">\n        \n            <div class="card post">\n        \n                \x3c!-- head for the post --\x3e\n                <div class="card-header">\n                   \n                    <div class="d-flex justify-content-between align-items-center">\n        \n                        <a href="/users/profile/${n.user.id}" class="text-dark">\n                            <div class="d-flex justify-content-between align-items-center">\n                                <div class="mr-2">\n                                    ${n.user.avatar}\n                                    <img class="rounded-circle" width="45" src="${n.user.avatar}" alt="">\n                                   \n                                    <img class="rounded-circle" width="45" src="<%= assetPath('images/no_profile.jpg') %>" alt="">\n                                     \n                                </div>\n                                <div class="ml-2">\n                                    <div class="h5 m-0 text-capitalize">${n.user.name}</div>\n                                    <div class="h7 text-muted">${n.user.email}</div>\n                                </div>\n                            </div>\n                        </a>\n        \n                        <div class="dropdown">\n                            <button class="btn btn-link dropdown-toggle" type="button" id="gedf-drop1" data-toggle="dropdown"\n                                aria-haspopup="true" aria-expanded="false">\n                                <i class="fa fa-ellipsis-h"></i>\n                            </button>\n                            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="gedf-drop1">\n                                <div class="h6 dropdown-header">Configuration</div>\n                                <a class="dropdown-item" href="#">Save</a>\n                                <% if(locals.user.id == post.user.id){ %>\n                                <a class="delete-post-button dropdown-item" href="/posts/destroy/${n.id}"> Delete </a>\n                                <% } %>\n                                <a class="dropdown-item" href="#">Report</a>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n        \n                \x3c!-- post body --\x3e\n                <div class="card-body card-post">\n                    <small>\n                        <div class="text-muted h7 mb-2"> <i class="far fa-clock"></i> &nbsp; <span id="created">\n                                ${n.createdAt} </span> </div>\n                    </small>\n        \n                    <p class="card-text">\n                    ${n.content}\n                    </p>\n        \n                    <small class="text-muted" id="likes-count-<%= post._id %>" data-likes="<%= post.likes.length %>">\n                        if(${n.likes.length} > 0){\n                        <img src="/images/like.png" class="rounded-circle" width="30">\n                        ${n.likes.length}\n                         } \n                    </small>\n        \n                    <span class="comments">\n                        <small class="text-muted">\n                             if( ${n.comments.length} > 0){\n                                    \n                                if(${n.comments.length} == 1){ \n                                    ${n.comments.length} comment\n                                }else{ \n                                    ${n.comments.length} comments\n                               } \n                            } \n                           \n                        </small>\n                    </span>\n                </div>\n        \n                \x3c!-- post footer --\x3e\n                <div class="card-footer">\n        \n                   if(${n.likes.find(n=>n.user==locals.user.id)}){ \n                    <a class="toggle-like-button card-link" id="put-like-${n._id}"\n                        href="/likes/toggle/?id=${n._id}"> <i class="fas fa-thumbs-up"></i> Like </a>\n        \n                     } else{ \n                    <a class="toggle-like-button card-link" id="put-like-${n._id}"\n                        href="/likes/toggle/?id=${n._id}"> <i class="far fa-thumbs-up"></i> Like </a>\n                     } \n        \n                    <a class="card-link" data-toggle="collapse" href="#comment-${n._id}" role="button"\n                        aria-expanded="false" aria-controls="collapseExample"><i class="far fa-comment"></i> Comment</a>\n                    <div class="collapse mt-2" id="comment-${n._id}">\n                        <div class="card card-body">\n        \n                            \x3c!-- comment functionality --\x3e\n                            <div class="post-comments">\n                                <form id="post-${n._id}-comments-form" action="/comments/create" method="POST">\n                                    <div class="form-group">\n                                        <input class="form-control" type="text" name="content" placeholder="Add a comment..."\n                                            required>\n                                    </div>\n                                    <input type="hidden" name="post" value="${n._id}">\n        \n                                </form>\n        \n                                <div class="post-comments-list">\n                                    <ul id="post-comments-${n._id}">\n                                        \n                                    </ul>\n        \n                                </div>\n                            </div>\n                        </div>\n                    </div>\n    \n                </div>\n            </div>\n        \n        </li>\n        `)},t=function(n){$(n).click((function(e){e.preventDefault(),$.ajax({type:"get",url:$(n).prop("href"),success:function(n){$("#post-"+n.data.post_id).remove(),new Noty({theme:"relax",text:"Post Deleted!",type:"success",layout:"topRight",timeout:1500}).show()},error:function(n){console.log(n.responseText)}})}))},s=function(){$("#post-list-container>ul>li").each((function(){let n=$(this),e=$(" .delete-post-button",n);t(e);let s=n.prop("id").split("-")[1];new PostComments(s)}))};n(),s()}